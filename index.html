<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vakitler 2025â€“2026</title>

  <style>
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
      background:linear-gradient(135deg,#fce4ec,#e3f2fd);
      margin:0;
      padding:16px;
      color:#333
    }
    h1,h2{text-align:center;margin:8px 0}
    .card{
      background:#ffffffcc;
      border-radius:16px;
      padding:16px;
      margin-bottom:16px;
      box-shadow:0 8px 20px rgba(0,0,0,.08)
    }
    select,button{
      width:100%;
      padding:10px;
      border-radius:12px;
      border:1px solid #ccc;
      margin-top:8px;
      font-size:16px
    }
    button{
      background:#ba68c8;
      color:#fff;
      border:none
    }
    .countdown{
      text-align:center;
      font-size:20px;
      font-weight:600
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px
    }
    th,td{
      padding:6px;
      text-align:center;
      border-bottom:1px solid #eee
    }
    th{background:#f3e5f5}
    .bugun{
      background:#fff3cd;
      font-weight:bold
    }
    .footer{
      text-align:center;
      font-size:12px;
      color:#666
    }
  </style>
</head>

<body>

<h1>ðŸŒ™ Vakitler</h1>
<h2>18 AralÄ±k 2025 â†’ 31 AralÄ±k 2026</h2>

<div class="card">
  <h2>Konum SeÃ§</h2>
  <select id="il"></select>
  <select id="ilce"></select>
  <button onclick="veriIndir()">Vakitleri Ä°ndir</button>
</div>

<div class="card">
  <h2>Ä°ftara Kalan SÃ¼re</h2>
  <div id="iftar" class="countdown">--</div>
</div>

<div class="card">
  <h2>Sahura Kalan SÃ¼re</h2>
  <div id="sahur" class="countdown">--</div>
</div>

<div class="card">
  <h2>GÃ¼nlÃ¼k Vakitler</h2>
  <table>
    <thead>
      <tr>
        <th>Tarih</th>
        <th>Sahur</th>
        <th>Ä°ftar</th>
      </tr>
    </thead>
    <tbody id="tablo"></tbody>
  </table>
</div>

<div class="footer">BugÃ¼n satÄ±rÄ± vurguludur ðŸŒ¸</div>

<script>
/* =======================
   AYARLAR
======================= */
const BASLANGIC = "2025-12-18";
const BITIS     = "2026-12-31";
const STORAGE_KEY = "vakitler_2025_2026";

/* Sabit ÅŸehirler */
const SEHIRLER = {
  "Kayseri": ["Melikgazi"],
  "Antalya": ["Manavgat"],
  "Burdur": ["YeÅŸilova"]
};

/* =======================
   HTML ELEMANLARI
======================= */
const ilSelect   = document.getElementById("il");
const ilceSelect = document.getElementById("ilce");
const tabloBody  = document.getElementById("tablo");

/* =======================
   BAÅžLANGIÃ‡
======================= */
sehirleriYukle();
setInterval(geriSayimlariGuncelle, 1000);
tabloyuDoldur();

/* =======================
   ÅžEHÄ°R / Ä°LÃ‡E
======================= */
function sehirleriYukle(){
  Object.keys(SEHIRLER).forEach(sehir=>{
    ilSelect.innerHTML += `<option>${sehir}</option>`;
  });
  ilDegisti();
}

ilSelect.onchange = ilDegisti;

function ilDegisti(){
  ilceSelect.innerHTML = "";
  SEHIRLER[ilSelect.value].forEach(ilce=>{
    ilceSelect.innerHTML += `<option>${ilce}</option>`;
  });
}

/* =======================
   VERÄ° Ä°NDÄ°RME
======================= */
async function veriIndir(){
  let tumVakitler = [];

  /* 2025 AralÄ±k */
  const r2025 = await fetch(
    `https://api.aladhan.com/v1/calendarByCity/2025/12?city=${ilceSelect.value}&country=Turkey&method=13`
  );
  const j2025 = await r2025.json();
  tumVakitler = tumVakitler.concat(j2025.data);

  /* 2026 tÃ¼m yÄ±l */
  for(let ay=1; ay<=12; ay++){
    const r = await fetch(
      `https://api.aladhan.com/v1/calendarByCity/2026/${ay}?city=${ilceSelect.value}&country=Turkey&method=13`
    );
    const j = await r.json();
    tumVakitler = tumVakitler.concat(j.data);
  }

  localStorage.setItem(STORAGE_KEY, JSON.stringify(tumVakitler));
  tabloyuDoldur();
}

/* =======================
   TABLO
======================= */
function tabloyuDoldur(){
  const data = vakitleriGetir();
  if(!data) return;

  tabloBody.innerHTML = "";

  data
    .filter(g =>
      g.date.gregorian.date >= BASLANGIC &&
      g.date.gregorian.date <= BITIS
    )
    .forEach(g=>{
      const tr = document.createElement("tr");
      if(g.date.gregorian.date === bugunISO()){
        tr.classList.add("bugun");
      }
      tr.innerHTML = `
        <td>${g.date.gregorian.date}</td>
        <td>${g.timings.Fajr.slice(0,5)}</td>
        <td>${g.timings.Maghrib.slice(0,5)}</td>
      `;
      tabloBody.appendChild(tr);
    });
}

/* =======================
   GERÄ° SAYIM
======================= */
function geriSayimlariGuncelle(){
  const data = vakitleriGetir();
  if(!data) return;

  const bugun = data.find(
    g => g.date.gregorian.date === bugunISO()
  );
  if(!bugun) return;

  geriSayim("iftar", bugun.timings.Maghrib);
  geriSayim("sahur", bugun.timings.Fajr);
}

function geriSayim(id, saatStr){
  const simdi = new Date();
  const [h,m] = saatStr.split(":");
  const hedef = new Date();
  hedef.setHours(h,m,0,0);

  const fark = hedef - simdi;
  if(fark <= 0){
    document.getElementById(id).innerText = "GeÃ§ti";
    return;
  }

  const s = Math.floor(fark/1000);
  const sa = Math.floor(s/3600);
  const dk = Math.floor((s%3600)/60);
  const sn = s%60;

  document.getElementById(id).innerText =
    `${sa} sa ${dk} dk ${sn} sn`;
}

/* =======================
   YARDIMCILAR
======================= */
function vakitleriGetir(){
  return JSON.parse(localStorage.getItem(STORAGE_KEY));
}

function bugunISO(){
  return new Date().toISOString().split("T")[0];
}
</script>

</body>
</html>


