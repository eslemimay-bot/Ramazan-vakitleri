<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kayseri İmsakiye ve Geri Sayım</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           1. CSS DEĞİŞKENLERİ (RENK VE TEMA)
           ========================================= */
        :root {
            --primary-color: #6A1B9A;   /* Koyu Mor (Yazılar) */
            --accent-lila:   #DCD0FF;   /* Pastel Lila (İftar Arka Plan) */
            --accent-mint:   #B2FBA5;   /* Pastel Nane (İmsak Arka Plan) */
            --bg-gradient-top: #f3e5f5;
            --bg-gradient-bottom: #ffffff;
            --card-shadow: 0 8px 20px rgba(0,0,0,0.08);
        }

        /* =========================================
           2. GENEL SAYFA DÜZENİ (LAYOUT)
           ========================================= */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(180deg, var(--bg-gradient-top) 0%, var(--bg-gradient-bottom) 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Kaydırma çubuğunu gizle */
        }

        /* Ana Uygulama Kutusu */
        main.app-container {
            width: 100%;
            max-width: 450px;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Arka Plan Dekoru */
        .background-icon {
            position: absolute;
            top: -50px;
            right: -40px;
            font-size: 180px;
            color: rgba(106, 27, 154, 0.05);
            z-index: -1;
            transform: rotate(-20deg);
            pointer-events: none;
        }

        /* =========================================
           3. BİLEŞENLER (COMPONENTS)
           ========================================= */
        
        /* Üst Bilgi Alanı */
        header.top-header {
            text-align: center;
            margin-top: 30px;
            color: var(--primary-color);
            z-index: 2;
        }

        .location-text {
            font-size: 14px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 600;
            opacity: 0.7;
        }

        .main-title {
            font-size: 26px;
            font-weight: bold;
            margin: 5px 0;
        }

        .status-badge {
            background-color: var(--primary-color);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 10px;
            display: inline-block;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: opacity 0.3s ease;
        }

        /* Geri Sayım Dairesi */
        section.countdown-section {
            flex-grow: 1; /* Boş alanı kapla */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .circle-wrapper {
            width: 260px;
            height: 260px;
            background: white;
            border-radius: 50%;
            border: 6px solid var(--accent-mint);
            box-shadow: 0 0 30px rgba(178, 251, 165, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .circle-label {
            font-size: 16px;
            color: #777;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .circle-timer {
            font-size: 46px;
            font-weight: bold;
            color: var(--primary-color);
            font-family: 'Courier New', Courier, monospace; /* Dijital saat hissi */
            letter-spacing: -2px;
            line-height: 1;
        }

        /* Alt Kartlar Alanı */
        footer.info-cards {
            width: 100%;
            margin-bottom: 40px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s;
            background-color: white; /* Varsayılan */
        }

        .card:active {
            transform: scale(0.98); /* Tıklama efekti */
        }

        .card-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card-icon { font-size: 26px; color: var(--primary-color); }
        .card-title { font-size: 18px; font-weight: bold; color: var(--primary-color); }
        .card-time  { font-size: 24px; font-weight: bold; color: var(--primary-color); }

        /* Kart Renkleri */
        .card.imsak { background-color: var(--accent-mint); }
        .card.iftar { background-color: var(--accent-lila); }

        /* Yardımcı Sınıflar */
        .hidden { display: none !important; }
        .debug-info { 
            position: absolute; 
            bottom: 5px; 
            font-size: 10px; 
            color: #ccc; 
            width: 100%; 
            text-align: center;
        }

    </style>
</head>
<body>

    <main class="app-container">
        <i class="fa-solid fa-mosque background-icon"></i>

        <header class="top-header">
            <div class="location-text">Kayseri Melikgazi</div>
            <h1 class="main-title" id="ui-title">Vakit Sayacı</h1>
            <div id="ui-badge" class="status-badge hidden">Ramazan</div>
        </header>

        <section class="countdown-section">
            <div class="circle-wrapper">
                <div id="ui-target-label" class="circle-label">Yükleniyor...</div>
                <div id="ui-timer" class="circle-timer">--:--:--</div>
            </div>
        </section>

        <footer class="info-cards">
            <div class="card imsak">
                <div class="card-left">
                    <i class="fa-regular fa-sun card-icon"></i>
                    <span class="card-title">İMSAK</span>
                </div>
                <span id="ui-imsak-time" class="card-time">--:--</span>
            </div>

            <div class="card iftar">
                <div class="card-left">
                    <i class="fa-solid fa-utensils card-icon"></i>
                    <span class="card-title">İFTAR</span>
                </div>
                <span id="ui-iftar-time" class="card-time">--:--</span>
            </div>
        </footer>
        
        <div id="ui-debug" class="debug-info"></div>
    </main>

    <script>
        /**
         * BÖLÜM 1: VERİ TABANI
         * Kayseri Melikgazi için Namaz Vakitleri
         * Format: "GG.AA.YYYY": { imsak: "SS:DD", iftar: "SS:DD", tur: "normal/ramazan" }
         */
        const VAKITLER_DB = {
            // --- ARALIK 2025 (Kayseri Güncel) ---
            "19.12.2025": { imsak: "06:14", iftar: "17:28", tur: "normal" },
            "20.12.2025": { imsak: "06:15", iftar: "17:29", tur: "normal" },
            "21.12.2025": { imsak: "06:15", iftar: "17:29", tur: "normal" },
            "22.12.2025": { imsak: "06:16", iftar: "17:30", tur: "normal" },
            "23.12.2025": { imsak: "06:16", iftar: "17:30", tur: "normal" },
            "24.12.2025": { imsak: "06:17", iftar: "17:31", tur: "normal" },
            "25.12.2025": { imsak: "06:17", iftar: "17:31", tur: "normal" },
            "26.12.2025": { imsak: "06:18", iftar: "17:32", tur: "normal" },
            "27.12.2025": { imsak: "06:18", iftar: "17:33", tur: "normal" },
            "28.12.2025": { imsak: "06:19", iftar: "17:33", tur: "normal" },
            "29.12.2025": { imsak: "06:19", iftar: "17:34", tur: "normal" },
            "30.12.2025": { imsak: "06:19", iftar: "17:35", tur: "normal" },
            "31.12.2025": { imsak: "06:20", iftar: "17:36", tur: "normal" },

            // --- RAMAZAN 2026 (CNN Türk Kayseri Listesi) ---
            "19.02.2026": { imsak: "05:56", iftar: "18:26", tur: "ramazan", gun: 1 },
            "20.02.2026": { imsak: "05:54", iftar: "18:27", tur: "ramazan", gun: 2 },
            "21.02.2026": { imsak: "05:53", iftar: "18:28", tur: "ramazan", gun: 3 },
            "22.02.2026": { imsak: "05:52", iftar: "18:30", tur: "ramazan", gun: 4 },
            "23.02.2026": { imsak: "05:51", iftar: "18:31", tur: "ramazan", gun: 5 },
            "24.02.2026": { imsak: "05:49", iftar: "18:32", tur: "ramazan", gun: 6 },
            "25.02.2026": { imsak: "05:48", iftar: "18:33", tur: "ramazan", gun: 7 },
            "26.02.2026": { imsak: "05:47", iftar: "18:34", tur: "ramazan", gun: 8 },
            "27.02.2026": { imsak: "05:45", iftar: "18:35", tur: "ramazan", gun: 9 },
            "28.02.2026": { imsak: "05:44", iftar: "18:36", tur: "ramazan", gun: 10 },
            "01.03.2026": { imsak: "05:43", iftar: "18:37", tur: "ramazan", gun: 11 },
            "02.03.2026": { imsak: "05:41", iftar: "18:38", tur: "ramazan", gun: 12 },
            "03.03.2026": { imsak: "05:40", iftar: "18:39", tur: "ramazan", gun: 13 },
            "04.03.2026": { imsak: "05:38", iftar: "18:40", tur: "ramazan", gun: 14 },
            "05.03.2026": { imsak: "05:37", iftar: "18:41", tur: "ramazan", gun: 15 },
            "06.03.2026": { imsak: "05:35", iftar: "18:42", tur: "ramazan", gun: 16 },
            "07.03.2026": { imsak: "05:34", iftar: "18:43", tur: "ramazan", gun: 17 },
            "08.03.2026": { imsak: "05:32", iftar: "18:44", tur: "ramazan", gun: 18 },
            "09.03.2026": { imsak: "05:31", iftar: "18:45", tur: "ramazan", gun: 19 },
            "10.03.2026": { imsak: "05:29", iftar: "18:46", tur: "ramazan", gun: 20 },
            "11.03.2026": { imsak: "05:28", iftar: "18:47", tur: "ramazan", gun: 21 },
            "12.03.2026": { imsak: "05:26", iftar: "18:48", tur: "ramazan", gun: 22 },
            "13.03.2026": { imsak: "05:25", iftar: "18:49", tur: "ramazan", gun: 23 },
            "14.03.2026": { imsak: "05:23", iftar: "18:50", tur: "ramazan", gun: 24 },
            "15.03.2026": { imsak: "05:21", iftar: "18:51", tur: "ramazan", gun: 25 },
            "16.03.2026": { imsak: "05:20", iftar: "18:52", tur: "ramazan", gun: 26 },
            "17.03.2026": { imsak: "05:18", iftar: "18:53", tur: "ramazan", gun: 27 },
            "18.03.2026": { imsak: "05:17", iftar: "18:54", tur: "ramazan", gun: 28 },
            "19.03.2026": { imsak: "05:15", iftar: "18:55", tur: "ramazan", gun: 29 }
        };

        /**
         * BÖLÜM 2: DOM ELEMENT SEÇİCİLERİ
         * HTML'deki id'leri değişkene atayarak yönetimi kolaylaştırıyoruz.
         */
        const UI = {
            title:       document.getElementById('ui-title'),
            targetLabel: document.getElementById('ui-target-label'),
            timer:       document.getElementById('ui-timer'),
            badge:       document.getElementById('ui-badge'),
            imsakTime:   document.getElementById('ui-imsak-time'),
            iftarTime:   document.getElementById('ui-iftar-time'),
            debug:       document.getElementById('ui-debug')
        };

        /**
         * BÖLÜM 3: YARDIMCI FONKSİYONLAR
         */

        // Sayı tek haneli ise başına '0' ekler (örn: 5 -> 05)
        function ikiHaneliYap(num) {
            return num.toString().padStart(2, '0');
        }

        // "05:56" gibi bir metni, verilen günün Date objesine çevirir
        function saatMetniniTariheCevir(referansTarih, saatMetni) {
            const parcalar = saatMetni.split(':');
            const yeniTarih = new Date(referansTarih);
            yeniTarih.setHours(parseInt(parcalar[0]), parseInt(parcalar[1]), 0, 0);
            return yeniTarih;
        }

        // İki tarih arasındaki farkı formatlar (SA:DK:SN)
        function sureyiFormatla(msFark) {
            const sa = Math.floor((msFark % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const dk = Math.floor((msFark % (1000 * 60 * 60)) / (1000 * 60));
            const sn = Math.floor((msFark % (1000 * 60)) / 1000);
            return `${ikiHaneliYap(sa)}:${ikiHaneliYap(dk)}:${ikiHaneliYap(sn)}`;
        }

        /**
         * BÖLÜM 4: ANA MANTIK (MAIN LOOP)
         * Her saniye çalışıp ekranı güncelleyen fonksiyon.
         */
        function uygulamayiGuncelle() {
            let simdi = new Date();
            
            // --- TEST ALANI (Geliştirici Modu) ---
            // 2026 Ramazan testini yapmak için alttaki satırın başındaki // işaretini kaldırın.
            // simdi = new Date(2026, 1, 19, 15, 0, 0); 
            // -------------------------------------

            // Bugünün tarih anahtarını oluştur (GG.AA.YYYY)
            const gun = ikiHaneliYap(simdi.getDate());
            const ay  = ikiHaneliYap(simdi.getMonth() + 1);
            const yil = simdi.getFullYear();
            const bugunKey = `${gun}.${ay}.${yil}`;

            // Ekrana tarihi yaz (Debug için)
            UI.debug.innerText = "Sistem Tarihi: " + bugunKey;

            // 1. ADIM: VERİ KONTROLÜ
            if (!VAKITLER_DB[bugunKey]) {
                // Veri yoksa bekleme ekranı
                UI.targetLabel.innerText = "Liste Sonu / Veri Yok";
                UI.timer.innerText = "--:--:--";
                UI.imsakTime.innerText = "-";
                UI.iftarTime.innerText = "-";
                UI.badge.classList.add('hidden');
                return;
            }

            const veri = VAKITLER_DB[bugunKey];

            // 2. ADIM: EKRANI BİLGİLERLE DOLDUR
            UI.imsakTime.innerText = veri.imsak;
            UI.iftarTime.innerText = veri.iftar;

            // Ramazan / Normal Gün Kontrolü
            if (veri.tur === "ramazan") {
                UI.badge.innerText = `Ramazan'ın ${veri.gun}. Günü`;
                UI.badge.classList.remove('hidden');
                UI.title.innerText = "Hayırlı Ramazanlar";
            } else {
                UI.badge.classList.add('hidden');
                UI.title.innerText = "Namaz Vakitleri";
            }

            // 3. ADIM: HEDEF ZAMANI BELİRLE
            const imsakVakti = saatMetniniTariheCevir(simdi, veri.imsak);
            const iftarVakti = saatMetniniTariheCevir(simdi, veri.iftar);
            
            let hedefZaman;
            let hedefMetin = "";

            if (simdi < imsakVakti) {
                // Durum: Sahura (İmsak'a) daha var
                hedefZaman = imsakVakti;
                hedefMetin = (veri.tur === "ramazan") ? "Sahura Kalan" : "İmsak Vaktine";

            } else if (simdi >= imsakVakti && simdi < iftarVakti) {
                // Durum: İftara (Akşam'a) daha var
                hedefZaman = iftarVakti;
                hedefMetin = (veri.tur === "ramazan") ? "İftara Kalan" : "Akşam Ezanına";

            } else {
                // Durum: İftar geçti, hedef YARINKİ İmsak
                const yarin = new Date(simdi);
                yarin.setDate(yarin.getDate() + 1);
                
                const yGun = ikiHaneliYap(yarin.getDate());
                const yAy  = ikiHaneliYap(yarin.getMonth() + 1);
                const yYil = yarin.getFullYear();
                const yarinKey = `${yGun}.${yAy}.${yYil}`;

                if (VAKITLER_DB[yarinKey]) {
                    hedefZaman = saatMetniniTariheCevir(yarin, VAKITLER_DB[yarinKey].imsak);
                    const yarinRamazanMi = (VAKITLER_DB[yarinKey].tur === "ramazan");
                    
                    hedefMetin = "Yarın İmsak";
                    if (veri.tur === "ramazan" || yarinRamazanMi) {
                        hedefMetin = "Sahura Kalan";
                    }
                } else {
                    UI.targetLabel.innerText = "Veri Bitti";
                    UI.timer.innerText = "SON";
                    return;
                }
            }

            // 4. ADIM: SAYACI HESAPLA VE YAZ
            const kalanSureMs = hedefZaman - simdi;
            UI.targetLabel.innerText = hedefMetin;
            UI.timer.innerText = sureyiFormatla(kalanSureMs);
        }

        // Uygulamayı başlat ve her saniye güncelle
        setInterval(uygulamayiGuncelle, 1000);
        uygulamayiGuncelle(); // İlk açılışta beklemeden çalışsın

    </script>
</body>
</html>

